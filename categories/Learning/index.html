<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">

    

    

    <title>Category: Learning | Luchen</title>
    <meta name="author" content="Luchen">
    <meta name="version" content="1.0.0">
    <meta name="keywords" content>
    <meta name="description" content="Keep this blog to record my learning and projects.">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    

    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

    <main class="app">
        <header class="header clearfix">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">Luchen</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://luchen29.github.io"></form>

        
        

        
        <div class="author-meta">
            
            <div class="author-name"></div>
            <div class="author-work"></div>
            <div class="author-location">
                <i class="icon-location vm"></i>
                <span class="vm"></span>
            </div>
            
        </div>
        
    </div>
</aside>

</header>

        <div id="content" class="content">
    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/12/21/Heap-And-PriorityQueue/">Heap-And-PriorityQueue</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-12-21T06:00:21.000Z" itemprop="datePublished">2019-12-21</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/DataStructure/">DataStructure</a>, <a class="article-tag-link" href="/tags/Learning/">Learning</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="Heap-amp-PriorityQueue-是什么"><a href="#Heap-amp-PriorityQueue-是什么" class="headerlink" title="Heap &amp; PriorityQueue 是什么"></a>Heap &amp; PriorityQueue 是什么</h4><ul>
<li>Heap 是一种数据结构，在内存中是以 array 进行存储的； 但在逻辑上是一个 Complete Tree 的结构，并且 Tree 的中间没有气泡。</li>
<li>PriorityQueue 实际上是 Java 中具有 Queue 接口的 heap 实现。毕竟是 Heap 的实现，所以它不真像 Queue 那样是 FIFO 的，每次做 poll()/ peek() 这些操作时候返回的是 min/ max 值。</li>
</ul>
<h4 id="Heap-amp-PriorityQueue-支持的-operations"><a href="#Heap-amp-PriorityQueue-支持的-operations" class="headerlink" title="Heap &amp; PriorityQueue 支持的 operations"></a>Heap &amp; PriorityQueue 支持的 operations</h4><h5 id="Heap-operations"><a href="#Heap-operations" class="headerlink" title="Heap operations:"></a>Heap operations:</h5><ul>
<li>insert: 把新元素放入队尾之后通过堆序性比较不断往上swap，即 percolate up 的过程。 O(logn)</li>
<li>update: 更新某个元素的值，之后或往上swap 或往下swap。 O(logn)</li>
<li>top/get: 获得堆顶元素的值，类似peek。 O(1)</li>
<li>pop: 删除堆顶元素，队尾的元素用 o(1) 时间补到堆顶去之后把它再不断往下swap，即 percolate down 的过程。O(logn)</li>
<li>heapify: 把一个无序的 array 变为 heap 的过程。 O(n)<h5 id="PriorityQueue-operations"><a href="#PriorityQueue-operations" class="headerlink" title="PriorityQueue operations:"></a>PriorityQueue operations:</h5></li>
<li>offer(E e): 把一个新元素 insert 到 heap 的过程。 O(logn)</li>
<li>因为 PriorityQueue 这个 class 实现的是 Queue 的接口， 所以它没有 update 的功能。想要更新某个元素的值只能先拿走这个 ele，修改，再 insert 进来。</li>
<li>peek(): 看一下堆顶元素的值。 O(1)</li>
<li>poll(): 删除堆顶元素，队尾的元素用 o(1) 时间补到堆顶去之后把它再不断往下swap，即 percolate down 的过程。O(logn)</li>
<li>remove(): 这个也是移除堆顶元素，不过 remove() 更易抛出异常。 O(logn)</li>
<li>remove(E e): 移除指定元素。这是个很贵的操作，需要先 search 一遍找到这个元素再删掉。 O(n) + O(logn) </li>
<li>size(): 返回一个 heap 的 size。 O(1)</li>
<li>isEmpty(): O(1)</li>
</ul>
<h4 id="Array-实现的-Heap-amp-BST"><a href="#Array-实现的-Heap-amp-BST" class="headerlink" title="Array 实现的 Heap &amp; BST"></a>Array 实现的 Heap &amp; BST</h4><h5 id="Array-实现的-Heap-的-operations"><a href="#Array-实现的-Heap-的-operations" class="headerlink" title="Array 实现的 Heap 的 operations"></a>Array 实现的 Heap 的 operations</h5><ul>
<li>Search: O(n)</li>
<li>remove: O(logn)</li>
<li>remove(E e): o(n + logn) -&gt; O(n)<h5 id="BST-的-operations"><a href="#BST-的-operations" class="headerlink" title="BST 的 operations"></a>BST 的 operations</h5></li>
<li>Search: O(logn)</li>
<li>remove: O(logn) </li>
<li>remove(E e): O(logn)<h5 id="似乎BST的时间效率更高，那为什么我们选择用-array-结构来实现-Heap-而不用-BST-来实现-Heap-呢？-或使用Array来实现-Heap-的好处在哪儿呢？"><a href="#似乎BST的时间效率更高，那为什么我们选择用-array-结构来实现-Heap-而不用-BST-来实现-Heap-呢？-或使用Array来实现-Heap-的好处在哪儿呢？" class="headerlink" title="似乎BST的时间效率更高，那为什么我们选择用 array 结构来实现 Heap 而不用 BST 来实现 Heap 呢？ / 或使用Array来实现 Heap 的好处在哪儿呢？"></a>似乎BST的时间效率更高，那为什么我们选择用 array 结构来实现 Heap 而不用 BST 来实现 Heap 呢？ / 或使用Array来实现 Heap 的好处在哪儿呢？</h5></li>
</ul>
<ol>
<li>Array 数据结构的空间利用率比BST更高, 没有overhead。举例来讲: 每个ele只用存它自己就够了，不用再存个left和right。</li>
<li>Array 数据结构的物理地址连续，可以很容易的表示出来父子节点之间的 idx 关系，进而结合 3 实现风骚走位。<br> a. 左孩子idx = 自己的idx * 2 + 1；<br> b. 右孩子idx = 自己的idx * 2 + 2；<br> c. 父节点idx = (自己的idx - 1) / 2；</li>
<li>Array 可以进行不同元素之间的 random access， Tree 结构只能 access 到它的左右孩子节点。</li>
<li>在工业界真实情况中，往往拿到的是很多Array状的数据。对array状的数据进行heapify较简单（？）</li>
</ol>
<h4 id="Heap-amp-Sort"><a href="#Heap-amp-Sort" class="headerlink" title="Heap &amp; Sort"></a>Heap &amp; Sort</h4><ul>
<li>想把一个无序的 array 变成具有堆序的 有两种方式： </li>
</ul>
<ol>
<li>建立一个大堆/ 小堆，一个一个的把元素 offer 进 heap 里，再从堆顶一个一个打印出来 –&gt; TC: O(n * logn) SC: O(n)</li>
<li>对 array 进行 Heapify 操作， 再一个一个打印出来/ 反序打印出来 –&gt; TC: O(n); SC: O(1)<h5 id="Heapify-操作是一种可以用-O-n-时间将一个无序-array-inplace-变成大堆序的操作。"><a href="#Heapify-操作是一种可以用-O-n-时间将一个无序-array-inplace-变成大堆序的操作。" class="headerlink" title="Heapify 操作是一种可以用 O(n) 时间将一个无序 array inplace 变成大堆序的操作。"></a>Heapify 操作是一种可以用 O(n) 时间将一个无序 array inplace 变成大堆序的操作。</h5></li>
</ol>
<ul>
<li>Heapify 操作的实质是： 让这个数组自行调整成一个大堆，即使之“堆有序”，且无需借助 𝑂(𝑛) 额外空间就完成了大堆的构建。</li>
<li>heapify 的具体实现方法<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4>link [<a href="https://www.liwei.party/2019/01/11/algorithms-and-data-structures/heapify-and-heap-sort/]" target="_blank" rel="noopener">https://www.liwei.party/2019/01/11/algorithms-and-data-structures/heapify-and-heap-sort/]</a></li>
</ul>
<h4 id="Practice-经典例题"><a href="#Practice-经典例题" class="headerlink" title="Practice 经典例题"></a>Practice 经典例题</h4><ol>
<li><p>K Smallest In Unsorted Array<br> 1.1 使用大堆做， 遍历一遍array，每次遇到比堆顶小的就更新堆 (先poll 再offer) 否则 continue. 最后poll k 次 就获得了倒序的最小的 k 个元素。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] findKSmallest(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="keyword">null</span> || k == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// new a max heap with size k</span></span><br><span class="line">    PriorityQueue&lt;Integer&gt; maxHeap = <span class="keyword">new</span> PriorityQueue&lt;&gt;(k, <span class="keyword">new</span> Comparator&lt;Integer&gt;()&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Integer a, Integer b)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (a.equals(b))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> a.compareTo(b) &gt; <span class="number">0</span> ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// loop through all integers</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; k) &#123;</span><br><span class="line">            maxHeap.offer(arr[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[i] &lt; maxHeap.peek()) &#123;</span><br><span class="line">            maxHeap.poll();</span><br><span class="line">            maxHeap.offer(arr[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[k];</span><br><span class="line">    <span class="keyword">if</span> (k &gt; arr.length) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">            res[i] = maxHeap.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> cur = maxHeap.poll();</span><br><span class="line">        res[i] = cur;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] array = &#123;<span class="number">7</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span>[] result2 = findKSmallest(array, <span class="number">6</span>);</span><br><span class="line">    <span class="keyword">for</span> (Integer ele : result2) &#123;</span><br><span class="line">        System.out.println(ele);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 1.2 使用 quick select方法， 即用quick sort partition 对 array 进行划分，每次返回划分的 idx(代表其左 都比他小； 其右 都比他大 但并不sorted)。此方法可以通过 quick select 获得前 k 小的 elements 但是是无序的。 还需再使用 Java Arrays 自带的方法后处理。</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] KSmallest(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k)&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="keyword">null</span> || k == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    quickSelect(arr, <span class="number">0</span>, arr.length - <span class="number">1</span>, k);</span><br><span class="line">    <span class="comment">// get first k elements, known k smallest but unsort. Sort first k.</span></span><br><span class="line">    <span class="keyword">int</span>[] res = getKEle(arr, k);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSelect</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="comment">// do quick sort partition</span></span><br><span class="line">    <span class="keyword">int</span> pivotIdx = quickSortPartition(arr, left, right);</span><br><span class="line">    <span class="keyword">if</span> (pivotIdx == k - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pivotIdx &lt; k - <span class="number">1</span>) &#123;</span><br><span class="line">        quickSelect(arr, pivotIdx + <span class="number">1</span>, right, k);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        quickSelect(arr, left, pivotIdx - <span class="number">1</span>, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">quickSortPartition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>&#123;</span><br><span class="line">    <span class="comment">// use mid as pivot</span></span><br><span class="line">    <span class="keyword">int</span> pivotIdx =  left + (right - left) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> pivotVal = arr[pivotIdx];</span><br><span class="line">    <span class="comment">// swap the pivot to tail to avoid complexity</span></span><br><span class="line">    swap(arr, pivotIdx, right);</span><br><span class="line">    <span class="comment">// left &amp; right, start &amp; end both need to be maintained</span></span><br><span class="line">    <span class="keyword">int</span> start = left, end = right - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// start and end 需要错开才停止</span></span><br><span class="line">    <span class="keyword">while</span> (start &lt;= end) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[start] &lt;= pivotVal) &#123;</span><br><span class="line">            start++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[end] &gt;= pivotVal) &#123;</span><br><span class="line">            end--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// do not forget do ++/ -- after swapping</span></span><br><span class="line">            swap(arr, start++, end--);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(arr, right, start);</span><br><span class="line">    <span class="keyword">return</span> pivotIdx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[b];</span><br><span class="line">    arr[b] = arr[a];</span><br><span class="line">    arr[a] = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] getKEle(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> k)&#123;</span><br><span class="line">    <span class="keyword">int</span>[] res = Arrays.copyOf(arr, k);</span><br><span class="line">    Arrays.sort(res);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] array = &#123;<span class="number">7</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span>[] result2 = KSmallest(array, <span class="number">6</span>);</span><br><span class="line">    <span class="keyword">for</span> (Integer ele : result2) &#123;</span><br><span class="line">        System.out.println(ele);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/25/SQL-Recover/">SQL Recover</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-25T13:28:48.000Z" itemprop="datePublished">2019-08-25</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/SQL/">SQL</a>, <a class="article-tag-link" href="/tags/database/">database</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <ul>
<li>A <a href="http://www.runoob.com/sql/sql-syntax.html" target="_blank" rel="noopener">table</a> for example:<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+<span class="comment">----+--------------+---------------------------+-------+---------+</span></span><br><span class="line">| id | name         | url                       | alexa | country |</span><br><span class="line">+<span class="comment">----+--------------+---------------------------+-------+---------+</span></span><br><span class="line">| 1  | Google       | https://www.google.cm/    | 1     | USA     |</span><br><span class="line">| 2  | 淘宝          | https://www.taobao.com/   | 13    | CN      |</span><br><span class="line">| 3  | 菜鸟教程      | http://www.runoob.com/    | 4689  | CN      |</span><br><span class="line">| 4  | 微博          | http://weibo.com/         | 20    | CN      |</span><br><span class="line">| 5  | Facebook     | https://www.facebook.com/ | 3     | USA     |</span><br><span class="line">+<span class="comment">----+--------------+---------------------------+-------+---------+</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><h4 id="SELECT-FROM"><a href="#SELECT-FROM" class="headerlink" title="SELECT  FROM "></a>SELECT <colume> FROM <table></table></colume></h4><ul>
<li>一列中的全部值： <code>SELECT name FROM websites</code></li>
<li>一列中的uniqe值： <code>SELECT DISTINCT country FROM websites</code></li>
</ul>
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/19/Sesson-Cookie-Token/">Sesson, Cookie, Token</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-19T10:09:54.000Z" itemprop="datePublished">2019-08-19</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Cookie/">Cookie</a>, <a class="article-tag-link" href="/tags/Sesson/">Sesson</a>, <a class="article-tag-link" href="/tags/Token/">Token</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <p>HTTP is a stateless protocal. Requests are independent each time which ensures a good efficiency. To share data among all pages within a same hostname, we need session and cookie.</p>
<h4 id="Cookie-and-Session"><a href="#Cookie-and-Session" class="headerlink" title="Cookie and Session"></a>Cookie and Session</h4><ul>
<li>Client send a http request to server.</li>
<li>Server receive the http request, create a session and send a http response back to clinet. Within the header of this response, set-cookie header is included, sessionId is included as well.</li>
<li>On client side, stores the sessionID returned from server. As the client send following requests, client browser will automatically add a cookie into the request. </li>
<li>Server receive a http request again. Server will analyze this cookie, check and varify session ID. If match, processed, server will return response to the client.</li>
</ul>
<h4 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h4><ul>
<li>Token based authentication is stateless authentication (server does not store any token), suitable for RESTful API.</li>
<li>Usually token will be stored in localStorage. </li>
<li>Client send a http request to server.</li>
<li>Server receive the http request, generate a token and send it back to the client.</li>
<li>this token will be stored in client’s localStorage.</li>
<li>On subsequent requests, this token will be sent within request headers.</li>
<li>Client get the token sent by client, decode it and validate it.</li>
</ul>
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/19/Docker/">Docker</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-19T06:14:05.000Z" itemprop="datePublished">2019-08-19</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Docker/">Docker</a>, <a class="article-tag-link" href="/tags/Learning/">Learning</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="Issues-we-face-when-developing-softwares"><a href="#Issues-we-face-when-developing-softwares" class="headerlink" title="Issues we face when developing softwares"></a>Issues we face when developing softwares</h4><ul>
<li>For the development of different softwares, we usually need different environment. Therefore, environment configuration becomes a complex and troublesome issuse, especially when environment have conflicts.</li>
<li>Virtual Machine becomes a solution for this issue by providing a new virtual system on the original system you have. However, this solution is not always ideal as it will takes up a large part of your memory resources, leading to a much slower operation. Besides, because Virtual Machine is a complete system, it contains many redundant operations which we actually don’t need.</li>
<li>Basing on these drawbacks of Virtual Machine, Linux Containers (LXC) were developed. LXC dose not provide a complete operating system as Virtual Machine, it just isolates applications from the infrastructure can provide an environment container for it. Compared with Virtual Machine, it takes much less resources and ensures a faster start-up.</li>
</ul>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><ul>
<li><a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker</a> is a popular Linux container solution. It helps to package the application together with its dependencies within a image file. By runing this image file, a virtual container will be created and an isolated runing environment will be created.</li>
</ul>
<p><img src="https://i2.wp.com/blog.docker.com/wp-content/uploads/Are-containers-..-vms-image-2-1024x759.png?ssl=1" alt="docker"> </p>
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/18/Design-Pattern/">Design Pattern</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-18T15:19:38.000Z" itemprop="datePublished">2019-08-18</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Design-Pattern/">Design Pattern</a>, <a class="article-tag-link" href="/tags/Learning/">Learning</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="1-Design-Pattern"><a href="#1-Design-Pattern" class="headerlink" title="1. Design Pattern"></a>1. Design Pattern</h3><ul>
<li>Design Pattern is a repeatable-solution/ template for a commanly recurring problem in software design. </li>
<li>The developement paradigms have been tested and proven, so by using it we could: 1) Speed up the development process. 2) Prevent subtle issues and improve coding readability.</li>
</ul>
<h3 id="2-Creational-Patterns"><a href="#2-Creational-Patterns" class="headerlink" title="2. Creational Patterns"></a>2. Creational Patterns</h3><ul>
<li>Creational Patterns are desin patterns that deal with object creation mechanisms, trying to create objects in a suitable manner under specific situation.<h4 id="2-1-Sigleton-Pattern"><a href="#2-1-Sigleton-Pattern" class="headerlink" title="2.1 Sigleton Pattern"></a>2.1 Sigleton Pattern</h4></li>
<li>Singleton pattern ensures, one class only has one instance, and provides a global point of access to it.</li>
<li>Examples
        
        
    </li></ul></section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/18/Authentication/">Authentication</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-18T06:07:59.000Z" itemprop="datePublished">2019-08-18</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Authentication/">Authentication</a>, <a class="article-tag-link" href="/tags/Learning/">Learning</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="1-Token-based-authentication"><a href="#1-Token-based-authentication" class="headerlink" title="1. Token-based authentication"></a>1. Token-based authentication</h4><ul>
<li>Users enter their log credentials (username + password).</li>
<li>Server varifies the credentials -&gt; if correct -&gt; creates an encrypted and signed token, with a private key.</li>
<li>On client side, stores the token returned from server.</li>
<li>On subsequent requests, the token is decoded with the same private key -&gt; if valid, the request processed.</li>
<li>Once the user logout the app, the token is destroyed on client-side, no interaction with server is necessary.</li>
</ul>
<h4 id="2-Session-based-authentication"><a href="#2-Session-based-authentication" class="headerlink" title="2. Session-based authentication"></a>2. Session-based authentication</h4><ul>
<li>Users enter their log credentials (username + password).</li>
<li>Server varifies the credentials -&gt; if correct -&gt; creates a session -&gt; return sessionID to user -&gt; store the session to database.</li>
<li>On client side, stores the sessionID returned from server.</li>
<li>On subsequent requests, the sessionID will be varified against the one stored in database -&gt; if match, request processed.</li>
<li>Once the user logout the app, the session is destroyed on the server side.</li>
</ul>
<p><img src="https://cdn.auth0.com/blog/cookies-vs-tokens/cookie-token-auth.png" alt="token"></p>
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/15/React-High-Order-Component/">React High Order Component</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-15T13:18:26.000Z" itemprop="datePublished">2019-08-15</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/React/">React</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/14/Storing-media-files-in-GCS/">Store Media Files On Google Cloud Storage</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-14T02:46:38.000Z" itemprop="datePublished">2019-08-14</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/Cloud/">Cloud</a>, <a class="article-tag-link" href="/tags/GCS/">GCS</a>, <a class="article-tag-link" href="/tags/Learning/">Learning</a>, <a class="article-tag-link" href="/tags/Object-Storage/">Object Storage</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h4 id="1-Difference-between-Object-Storage-Database-and-File-System"><a href="#1-Difference-between-Object-Storage-Database-and-File-System" class="headerlink" title="1. Difference between Object Storage, Database and File System"></a>1. Difference between Object Storage, Database and File System</h4><ul>
<li><p>Object Storage: Each piece of data is stored as an object with no tree-shape index. Datas are searched by using unique address/ path, which ensures a higher efficiency. </p>
</li>
<li><p>File System: Data are stored as a piece of information in folder, to help organize it among all other data. </p>
</li>
</ul>
<h4 id="2-Advantages-of-using-Object-Storage-Service"><a href="#2-Advantages-of-using-Object-Storage-Service" class="headerlink" title="2. Advantages of using Object Storage Service"></a>2. Advantages of using Object Storage Service</h4><ul>
<li>a. Highly Durable: Most of the Object Storage Service (e.g. GCS, Amazon S3 + CloudFront) are designed for a very high (~99.99999999%) durability. Datas are redundantly backed up, which ensures a greate data integrity.</li>
<li>b. Highly Avaliable: All storage class offer high avaliablity around the world.</li>
<li>c. Highly Scalable: Distributd storage.</li>
<li>d. Inexpensive: Nearly free. Good choise to store unstructured media files like images, videos ets.</li>
</ul>
<h4 id="3-General-idea-of-how-to-send-images-to-GCS"><a href="#3-General-idea-of-how-to-send-images-to-GCS" class="headerlink" title="3. General idea of how to send images to GCS."></a>3. General idea of how to send images to GCS.</h4><ul>
<li>From the backend side, after we got the request from corresponding URL, we need to add a middleware <code>multer</code> to store the object first and then post to GCS. Therefore, the router handler should be somthing like: <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.post(<span class="string">'&lt;YOUR_TARGET_URL&gt;'</span>, multer.single(<span class="string">'&lt;INPUT_FIELD_NAME&gt;'</span>), gcsMiddlewares.sendUploadToGCS, image_controller.addImageToGCS)</span><br></pre></td></tr></table></figure>

</li>
</ul>
        
        
    </section>
</article>


    <article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            <a href="/2019/08/13/React-Ref/">React Ref</a>
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://luchen29.github.io/categories/Learning/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-08-13T08:54:40.000Z" itemprop="datePublished">2019-08-13</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/React/">React</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h3 id="1-何时使用-Ref"><a href="#1-何时使用-Ref" class="headerlink" title="1. 何时使用 Ref"></a>1. 何时使用 Ref</h3><p>通常我们可以通过props进行父子Component之间的数据传递，而使用Ref可以独立于Dataflow进行父子Component之间的interaction。</p>
        
        
    </section>
</article>





</div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>

    
</footer>

    </main>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }
            
            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","superSample":2,"width":150,"height":300,"hOffset":135,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacity":0.9},"log":false});</script></body>
</html>
